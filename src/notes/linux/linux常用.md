---
title: "linux常用"
date: 2024-05-31
---

## 日志查看：

**参考博客地址**：https://blog.csdn.net/hhhhhhhhhhwwwwwwwwww/article/details/136116029

### tail

#### 命令参数：

- **`-f`**：循环读取，即实时追踪文件的变化，并显示新增的内容。常用于监控日志文件。
- **`-q`**：不显示处理信息，即不显示文件名。
- **`-v`**：显示详细的处理信息，即显示文件名。
- **`-c <数目>`**：显示指定字节数的内容。如果文件较小，将显示整个文件内容。
- **`-n <行数>`**：显示指定行数的内容。默认显示最后10行。
- **`--pid=PID`**：与-f选项一起使用，当指定进程ID（PID）结束后，tail命令也结束。
- **`-s, --sleep-interval=S`**：与-f选项一起使用，表示在每次反复之间的休眠间隔为S秒。

#### 案例：

1. 显示文件末尾的默认行数

   **`tail 【文件名】`**

2. 显示文件最后N行

   **`tail -n 20 【文件名】`**

3. 循环读取文件最后十行

   **`tail -f 【文件名】`**

4. 显示文件的最后N个字节`<不是字符是字节>`

   **`tail -c 100 【文件名】`**

5. 在进程结束后结束tail命令

   **`tail -f --pid=12345 【文件名】`**

6. 。。。。



### cat

#### 命令参数：

- **`-n 或 --number`**：为输出的每一行内容前面加上行号。
- **`-b 或 --number-nonblank`**：只为非空行加上行号。
- **`-s 或 --squeeze-blank`**：当遇到连续两行以上的空白行时，只显示一行的空白行。
- **`-v 或 --show-nonprinting`**：显示非打印字符，例如制表符和换行符。
- **`-E 或 --show-ends`**：在每行的末尾显示 `$`。
- **`T 或 --show-tabs`**：将制表符显示为 `^I`。
- **`-A, --show-all`**：等价于 `-vET`，显示所有非打印字符。
- **`-e`**：等价于 `-vE`。
- **`-t`**：等价于 `-vT`。

#### 案例

1. 搜索特定文本

   `cat 【文件名】 | grep "关键词"`

2. 显示匹配的行号

   `cat -n 【文件名】 | grep "关键词"`

3. 忽略大小写搜索

   `cat 【文件名】 | grep -i "关键词"`

4. 显示不匹配的行

   `cat 【文件名】 |grep -v "关键词"`

5. 使用扩展正则表达式

   `cat 【文件名】 | grep -E "正则1|正则2"`



### tac

#### 命令参数：

- **`-b, --before`**：在行前而非行尾添加分隔标志。
- **`-r, --regex`**：将分隔标志视作正则表达式来解析。
- **`-s, --separator=STRING`**：指定字符串代替换行符作为行分隔标志。
- **`--help`**：显示帮助信息并退出。
- **`--version`**：显示版本信息并退出。

#### 案例：

1. 反向显示文件内容：

   `tac 【文件名】`

### head

#### 命令参数：

- **`-n, --lines=[-]NUM`**：指定要显示的行数。`NUM` 为正数时表示从文件开头开始显示的行数；`NUM` 为负数时表示从文件结尾开始显示的行数。
- **`-c, --bytes=[-]NUM`**：指定要显示的字节数。类似于 `-n` 选项，但是以字节为单位。
- **`-q, --quiet, --silent`**：不显示文件名。
- **`-v, --verbose`**：总是显示文件名。
- **`-z, --zero-terminated`**：使用 NUL 替代换行符作为行结束符。

#### 案例：

1. 查看文件的前几行：

   `head -n 5 【文件名】`

2. 查看文件的前几个字节

   `head -c 100 【文件名】`

3. 创建文件副本并只复制前几行

   `head -n 10 【原文件名】 > 【目标文件名】`

4. 组合命令实现文件拼接

   `ls -l | head -n 5`

5. 静默模式，不显示文件名

   `head -q 【文件名1】 【文件名2】`

6. 显示文件名和内容

   `head -v 【文件名1】 【文件名2】`

7. 显示文件除最后几行之外的所有内容

   `head -n 5 【文件名】`

8. 显示文本文件的前几个字符

   `head -c 10K 【文件名】`

9. 显示二进制文件的前几个字节

   `head -c 100 【二进制文件名】`



### grep

#### 基本语法：

`grep [OPTIONS] PATTERN [FILE...]`

- **`OPTIONS`**：`grep`的选项，用于控制搜索行为
- **`PATTERN`**：要搜索的模式，可以是简单的字符串，也可以是复杂的正则表达式
- **`FILE`**：要搜索的文件名。如果未指定文件名，`grep`会从标准输入读取内容

#### 命令参数：

- **`-i`**：忽略大小写。
- **`-v`**：反转匹配，只显示不匹配的行。
- **`-r 或 -R`**：递归搜索，包括所有子目录中的文件。
- **`-l`**：仅显示包含匹配内容的文件名。
- **`-L`**：显示不包含匹配内容的文件名。
- **`-n`**：显示匹配行及其行号。
- **`-c`**：计算匹配的行数。
- **`-o`**：仅显示匹配的部分，而不是整行内容。
- **`-e`**：指定多个搜索模式。
- **`-f`**：从文件中读取模式。
- **`-A NUM`**：显示匹配行之后的 NUM 行。
- **`-B NUM`**：显示匹配行之前的 NUM 行。
- **`-C NUM 或 --context=NUM`**：显示匹配行及其前后的 NUM 行。
- **`-E 或 --extended-regexp`**：使用扩展正则表达式。
- **`-F 或 --fixed-strings`**：将模式视为固定字符串，而不是正则表达式。
- **`-G 或 --basic-regexp`**：使用基本正则表达式（默认）。
- **`-P 或 --perl-regexp`**：使用 Perl 兼容的正则表达式。
- **`-U 或 --binary`**：将文件视为二进制文件，不进行换行符转换。
- **`-u`**：仅匹配未排序的行。
- **`-z 或 --null-data`**：将输入视为以 NUL 字符分隔的行。

#### 案例：

1. 基本搜索

   `grep "正则" 【文件名】`

2. 忽略大小写搜索

   `grep -i "正则" 【文件名】`

3. 显示匹配行及行号

   `grep -n "正则" 【文件名】`

4. 递归搜索

   `grep -r "正则" 【文件夹路径/】`

5. 只显示文件名

   `grep -l "正则" *.txt`

   搜索所有`.txt`文件，并只显示包含 “pattern” 的文件名。

6. 显示不匹配的行

   `grep -v "正则" 【文件名】`

7. 显示匹配行之后两行

   `grep -A 2 "正则" 【文件名】`

8. 使用扩展正则表达式

   `grep -E "正则1|正则2" 【文件名】`

9. 从文件中读取模式

   `grep -f 【正则文件名】 【搜索文件名】`

10. 使用 Perl 兼容的正则表达式

    `grep -P \b正则\b 文件名`



### less

#### 基本语法：

`less [OPTION]... [FILE]...`

其中，`OPTION` 是可选的参数，`FILE` 是要查看的文件名。如果未指定文件名，`less` 会从标准输入读取内容。

#### 命令参数：

- **`-b<缓冲区大小>`** ：设置缓冲区的大小。
- **`-e`**：当文件显示结束后，自动退出。
- **`-f`**：强制打开特殊文件，例如外围设备代号、目录和二进制文件。
- **`-g`**：只高亮显示最后搜索的关键词。
- **`-i`**：忽略搜索时的大小写。
- **`-m`**：显示类似 more 命令的百分比。
- **`-N`**：显示每行的行号。
- **`-o <文件名>`**：将 less 输出的内容在指定文件中保存起来。
- **`-Q`**：不使用警告音。
- **`-s`**：将连续多个空行显示为一行。
- **`-S`**：行过长时间将超出部分舍弃。
- **`-x`** <数字>：将 tab 键显示为规定的数字空格。

#### 操作：

- **`上下箭头`**：向上、向下滚动一行。
- **`空格`**：向下翻页。
- **`b`**：向上翻页。
- **`g`**：跳到文件开头。
- **`G`**：跳到文件结尾。
- **`/`**：接着输入要搜索的字符串，进行向下搜索。
- **`?`**：接着输入要搜索的字符串，进行向上搜索。
- **`n`**：重复前一个搜索（与 / 或 ? 有关）。
- **`N`**：反向重复前一个搜索（与 / 或 ? 有关）。
- **`q`**：退出 less。

#### 案例：

1. 查看文件内容

   `less 【文件名】`

2. 查看文件内容并显示行号

   `less -N 【文件名】`

   使用 `-N` 参数可以在查看文件时同时显示行号。

3. 搜索指定字符串

   ```shell
   less 【文件名】
   /keyword
   ```

4. 退出less

   在 `less` 查看文件时，按 `q` 键可以退出。

5. 查看多个文件

   `less 【文件1】 【文件2】`



### awk

#### 基本语法：

`awk 'pattern { action }' file`

- **`pattern`**：一个用于匹配行的模式。如果省略，`awk` 会处理每一行。
- **`action`**：当模式匹配到行时要执行的命令或操作。
- **`file`**：要处理的文件名。

#### 命令参数：

- **`$0`**：当前记录（整行内容）。
- **`$n`**：当前记录的第 n 个字段，字段默认以空格分隔。
- **`FS`**：输入字段分隔符，默认为空格。
- **`NF`**：当前记录的字段数量。
- **`NR`**：当前处理的记录号（行号）。


#### 案例：

1. 打印文件的全部内容

   `awk '{ print }' 【文件名】`

2. 打印指定字段

   `awk '{ print $1 }' 【文件名】`

   以冒号分割，此处打印每行第一个分割字符串

3. 使用自定义字段分隔符

   使用 `-F` 参数指定字段分隔符为冒号：

   `awk -F: '{ print $1 }' 【文件名】`

   此处效果和上面一致

4. 计算字段和

   `awk -F: '{ sum += $2 } END { print sum }' 【文件名】`

5. 打印匹配特定模式的行

   打印包含 “manager” 的行：

   `awk '/manager/ { print }' 【文件名】`

6. 使用内置变量 NF

   打印每行的字段数量：

   `awk '{ print NF }' 【文件名】`

7. 使用变量赋值：

   打印每行第一个字段并加上前缀 "User: "：

   `awk -v prefix="User: " '{ print prefix $1 }' 【文件名】`